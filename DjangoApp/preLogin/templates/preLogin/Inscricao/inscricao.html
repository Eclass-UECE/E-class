<html>
<body>
<h1>INSCRIÇÃO</h1>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ inscricao_form.as_p }}
    <input type="submit" value="Enviar">
</form>

<!-- Formatação campo data -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const input = document.getElementById('campo-data');
    
        input.addEventListener('input', function () {
            let value = input.value.replace(/\D/g, ''); // Remove tudo que não for número
            if (value.length > 2 && value.length <= 4) {
                value = value.slice(0, 2) + '/' + value.slice(2);
            } else if (value.length > 4) {
                value = value.slice(0, 2) + '/' + value.slice(2, 4) + '/' + value.slice(4, 8);
            }
            input.value = value;
        });
    });
    </script>
    
<!-- Formatação campo telefone -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const input = document.getElementById('campo-telefone');
    
        input.addEventListener('input', function () {
            let value = input.value.replace(/\D/g, ''); // Remove tudo que não for número

         if (value.length > 12) {
             value = value.slice(0, 12); // Limita a 11 dígitos (2 do DDD + 9 do número)
        }

        if (value.length > 2) {
            value = value.slice(0, 2) + ' ' + value.slice(2);
        }

        input.value = value;
        });
    });
</script>    

<!-- Formatação campo CPF -->
<script>
document.addEventListener('DOMContentLoaded', function () {
        const input = document.getElementById('campo-cpf');
    
        input.addEventListener('input', function () {
            let value = input.value.replace(/\D/g, ''); // Remove tudo que não for número
            if (value.length > 3 && value.length <= 6) {
                value = value.slice(0, 3) + '.' + value.slice(3, 6);
            } else if (value.length > 6 && value.length <= 9) {
                value = value.slice(0, 3) + '.' + value.slice(3, 6) + '.' + value.slice(6, 9);
            }
            else if (value.length > 9){
                value = value.slice(0, 3) + '.' + value.slice(3, 6) + '.' + value.slice(6, 9) + '-' +
                value.slice(9,11);
            }
            input.value = value;

            validar_cpf(input.value)
        });
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const input = document.getElementById('campo-email');
    
        const emailInput = document.getElementById('email');
        const erroEmail = document.getElementById('erroEmail');

        form.addEventListener('submit', function(event) {
            const email = emailInput.value;
            const emailValido = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

            if (!emailValido) {
                event.preventDefault(); // Impede o envio do formulário
                erroEmail.textContent = 'Por favor, insira um e-mail válido.';
            } else {
                erroEmail.textContent = ''; // Limpa erro se válido
            }
        });
    });
    </script>


</body>

</html>

